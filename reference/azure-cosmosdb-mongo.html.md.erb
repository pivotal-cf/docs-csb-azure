---
title: Azure Cosmos DB Mongo API Reference
owner: Cloud Service Broker
---

<strong><%= modified_date %></strong>

This topic provides reference information about the Azure Cosmos DB Mongo API service (csb-azure-mongodb).
It details the plans, configuration parameters, and binding credentials.

## <a id="plans"></a> Plans

The following table lists the pre-configured plans available for Azure Cosmos DB Mongo API:

| Plan   | Description |
|--------|-------------|
| small  | Mongo Cosmos DB Account, no redundancy, and 400 request units. |
| medium | Mongo Cosmos DB Account, single read failover location, and 1,000 request units. |
| large  | Mongo Cosmos DB Account, single read/write failover location, and 10,000 request units. |

## <a id="plans-config"></a> Plan Configuration Parameters

When configuring <%= vars.product_short %> you can add additional plans.
For how to configure plans, see <a href="../installing-with-azure.html#services">Configure Services with Cloud Service Broker for Azure</a>.

The following table lists parameters which can only be configured for additional plans:

| Parameter Name          | Description                     | Default   |
|-------------------------|---------------------------------|-----------|
| `name`*                 | The plan name.                  | _n/a_     |
| `id`*                   | A unique GUID.                  | _n/a_     |
| `description`*          | Description of the new plan.    | _n/a_     |
| `display_name`          | Name to use when displaying plan in marketplace.    | _n/a_     |
| `private_endpoint_subnet_id` | ID of the subnet within which the Private Endpoint for the CosmosDB account is created. For example, `"exampleID"` | `""` |
| `private_dns_zone_ids` | Array of Private DNS Zone IDs to create private DNS zone groups for when using Private Endpoints. For example, `["exampleID1", "exampleID2"]` | `[]` |

<sup>*</sup> Required

You can also add any of the configuration parameters listed in the [parameters](#parameters) section
to your plan.

<p class="note">
  <strong>Note:</strong> If you set a parameter at plan level, developers cannot
  change the value when creating or updating service instances.
</p>

## <a id="parameters"></a> Configuration Parameters

You can provision a service by running:

```bash
cf create-service csb-azure-mongodb PLAN-NAME SERVICE-INSTANCE-NAME -c '{"PARAMETER-NAME": "PARAMETER-VALUE"}'
```

You can update the configuration parameters for a service instance by running:

```bash
cf update-service SERVICE-INSTANCE-NAME -c '{"PARAMETER-NAME": "PARAMETER-VALUE"}'
```

The following table lists the parameters that you can configure, using the `-c` flag, when
provisioning a csb-azure-mongodb service:

<table>
  <thead>
    <tr>
      <th width="20%">Parameter Name</th>
      <th width="10%">Type</th>
      <th width="40%">Description</th>
      <th width="20%">Default</th>
      <th width="10%">Operation</th>
    </tr>
  </thead>
  <tr>
    <td><code>request_units</code></td>
    <td>integer</td>
    <td>
      (Required) The throughput of the MongoDB collection (RU/s). This parameter has the following constraints:
      <ul>
        <li>Maximum: 100000</li>
        <li>Minimum: 400</li>
        <li>Multiples of: 100</li>
      </ul>
    </td>
    <td><code>400</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>failover_locations</code></td>
    <td>array</td>
    <td>
      A list of locations for the Cosmos DB account. The first location is the default write location.
      For available locations, see the
      <a href="https://azure.microsoft.com/en-gb/global-infrastructure/data-residency/#select-geography">Microsoft documentation</a>.
    </td>
    <td><code>["westus"]</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>instance_name</code></td>
    <td>string</td>
    <td>
      The name of your Cosmos DB with API for MongoDB instance. This parameter has the following constraints:
      <ul>
        <li>Maximum character length: 98</li>
        <li>Minimum character length: 6</li>
        <li>Allowed characters: lowercase letters and numbers</li>
      </ul>
    </td>
    <td><code>csb-mongo-INSTANCE-ID</code></td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>account_name</code></td>
    <td>string</td>
    <td>
      Account name for your Cosmos DB with API for MongoDB instance. After being set, this cannot be updated. <br>
      This parameter has the following constraints:
      <ul>
        <li>Maximum character length: 44</li>
        <li>Minimum character length: 6</li>
        <li>Allowed characters: lowercase letters and numbers</li>
      </ul>
    </td>
    <td><code>csbINSTANCE-ID</code></td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>resource_group</code></td>
    <td>string</td>
    <td>
      Name for the resource group for this instance. After being set, this cannot be updated. <br>
      This parameter has the following constraints:
      <ul>
        <li>Maximum character length: 64</li>
        <li>Minimum character length: 0</li>
        <li>Allowed characters: lowercase letters and numbers</li>
      </ul>
    </td>
    <td><code>""</code></td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>db_name</code></td>
    <td>string</td>
    <td>
      Name for your Cosmos DB database with API for Mongo DB. This parameter has the following constraints:
      <ul>
        <li>Maximum character length: 255</li>
        <li>Minimum character length: 6</li>
        <li>Allowed characters: lowercase letters and numbers</li>
      </ul>
    </td>
    <td><code>csb-dbINSTANCE-ID</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>collection_name</code></td>
    <td>string</td>
    <td>Name for your collection. This parameter has the following constraints: maxLength: 255</td>
    <td><code>default_collection</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>shard_key</code></td>
    <td>string</td>
    <td>Name for your shard key.</td>
    <td><code>uniqueKey</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>location</code></td>
    <td>string</td>
    <td>
      The location of the Mongo DB instance. For available locations, see the
      <a href="https://azure.microsoft.com/en-gb/global-infrastructure/data-residency/#select-geography">Microsoft documentation</a>.
    </td>
    <td><code>westus</code></td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>ip_range_filter</code></td>
    <td>string</td>
    <td>
      CosmosDB Firewall Support. This value specifies the set of IP addresses or
      IP address ranges in CIDR form to be included as the allowed list of client
      IP addresses for a given database account. <br><br>
      IP addresses and ranges must be comma separated and must not contain any spaces.
      <code>0.0.0.0</code> allows access from Azure networks.
      An empty string <code>""</code> allows access from all public networks.
    </td>
    <td><code>"0.0.0.0"</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>consistency_level</code></td>
    <td>string</td>
    <td>
      The Consistency Level to use for this CosmosDB Account.
      The options are <code>BoundedStaleness</code>, <code>Eventual</code>,
      <code>Session</code>, <code>Strong</code>, and <code>ConsistentPrefix</code>.<br><br>
      If you choose <code>BoundedStaleness</code>, you must also set
      <code>max_interval_in_seconds</code> and <code>max_staleness_prefix</code>.
    </td>
    <td><code>Session</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>max_interval_in_seconds</code></td>
    <td>integer</td>
    <td>
      Required when <code>consistency_level</code> is set to <code>BoundedStaleness</code>.
      Sets the time in seconds that staleness is tolerated.
      Accepted range for this value is <code>5</code> - <code>86400</code> (1 day).
    </td>
    <td><code>5</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>max_staleness_prefix</code></td>
    <td>integer</td>
    <td>
      Required when <code>consistency_level</code> is set to <code>BoundedStaleness</code>.
      Sets the number of stale requests tolerated.
      Accepted range for this value is <code>10</code> to <code>2147483647</code>.
    </td>
    <td><code>100</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>enable_multiple_write_locations</code></td>
    <td>boolean</td>
    <td>Set to <code>true</code> to enable multi-master support for this Cosmos DB account.</td>
    <td><code>false</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>enable_automatic_failover</code></td>
    <td>boolean</td>
    <td>Set to <code>true</code> to enable automatic failover for this Cosmos DB account.</td>
    <td><code>false</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>azure_tenant_id</code></td>
    <td>string</td>
    <td>The ID of the Azure tenant for the instance.</td>
    <td>The value the operator entered for <strong>Tenant ID</strong> in <%= vars.ops_manager %></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>azure_subscription_id</code></td>
    <td>string</td>
    <td>The ID of the Azure subscription for the instance.</td>
    <td>The value the operator entered for <strong>Subscription ID</strong> in <%= vars.ops_manager %></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>azure_client_id</code></td>
    <td>string</td>
    <td>The ID of the Azure service principal to authenticate for service instance creation.</td>
    <td>The value the operator entered for <strong>Client ID</strong> in <%= vars.ops_manager %></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>azure_client_secret</code></td>
    <td>string</td>
    <td>The secret (password) for the Azure service principal to authenticate for service instance creation.</td>
    <td>The value the operator entered for <strong>Client Secret</strong> in <%= vars.ops_manager %>.</td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>skip_provider_registration</code></td>
    <td>boolean</td>
    <td>
      Set to <code>true</code> to skip automatic Azure provider registration.
      Set if the service principal being used does not have the rights to register providers.
    </td>
    <td><code>false</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>authorized_network</code></td>
    <td>string</td>
    <td>
      The subnet ID, of the Azure Virtual Network (VNet) that is attached to this instance.
      If left unspecified, it will be public.
    </td>
    <td><code>""</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>public_network_access_enabled</code></td>
    <td>boolean</td>
    <td>Set to allow or disallow public network access for this CosmosDB account.</td>
    <td><code>true</code></td>
    <td>provision and update</td>
  </tr>
</table>

## <a id="binding-creds"></a> Binding Credentials

The format for binding credentials for Azure Cosmos DB Mongo API is as follows:

```json
{
    "uri" : "PRIMARY-MASTER-MONGODB-URI",
    "status" : "STATUS-DESCRIPTION"
}
```

Where:

- `PRIMARY-MASTER-MONGODB-URI` is the primary master Mongo DB URI of the Cosmos DB Mongo Collection.
- `STATUS-DESCRIPTION` is the status of the operation.
